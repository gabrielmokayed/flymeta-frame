{\rtf1\ansi\ansicpg1252\cocoartf2821
\cocoatextscaling0\cocoaplatform0{\fonttbl\f0\fswiss\fcharset0 Helvetica;}
{\colortbl;\red255\green255\blue255;}
{\*\expandedcolortbl;;}
\paperw11900\paperh16840\margl1440\margr1440\vieww11520\viewh8400\viewkind0
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardirnatural\partightenfactor0

\f0\fs24 \cf0 exports.handler = async (event, context) => \{\
  if (event.httpMethod === 'POST') \{\
    const \{ buttonIndex, state \} = JSON.parse(event.body);\
\
    // Fetch your JSON data (or use a static list of images)\
    const destinations = [\
      "https://static.wixstatic.com/media/5443c9_114aa225fdc4451a8325c1f302f23793~mv2.jpg/v1/fit/w_456,h_454,q_90,enc_avif,quality_auto/5443c9_114aa225fdc4451a8325c1f302f23793~mv2.jpg",\
      "https://static.wixstatic.com/media/5443c9_8f1e33151df344ddad6d779dd85c88f5~mv2.jpg/v1/fit/w_454,h_454,q_90,enc_avif,quality_auto/5443c9_8f1e33151df344ddad6d779dd85c88f5~mv2.jpg",\
      "https://static.wixstatic.com/media/5443c9_11ccfa822b5e46e6ac64d9269a70b511~mv2.jpg/v1/fit/w_456,h_454,q_90,enc_avif,quality_auto/5443c9_11ccfa822b5e46e6ac64d9269a70b511~mv2.jpg",\
    ];\
\
    // Handle button clicks\
    if (buttonIndex === 1) \{\
      const randomImageUrl = destinations[Math.floor(Math.random() * destinations.length)];\
\
      // Return a new frame with the random image\
      return \{\
        statusCode: 200,\
        body: JSON.stringify(\{\
          type: 'frame',\
          image: randomImageUrl,\
          buttons: [\
            \{ label: 'Reveal Destination', action: 'post' \},\
            \{ label: 'Get Yours', action: 'link', target: 'https://opensea.io/collection/flymeta' \},\
          ],\
          state: JSON.stringify(\{ lastImage: randomImageUrl \}), // Optional: Store state\
        \}),\
      \};\
    \} else \{\
      return \{\
        statusCode: 200,\
        body: JSON.stringify(\{ message: 'Button 2 clicked' \}),\
      \};\
    \}\
  \} else \{\
    // Return a 405 error for non-POST requests\
    return \{\
      statusCode: 405,\
      body: JSON.stringify(\{ message: 'Method not allowed' \}),\
    \};\
  \}\
\};}